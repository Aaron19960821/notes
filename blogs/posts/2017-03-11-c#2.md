---
layout: post
title: c# week 2
tags: [.NET]
---

## 有关类的知识
### 类的解剖
类的成分会有下面的几种情况。
- 成员变量: 用于表示数据，可以属于对象的一个实例，也可以属于类自身(static).
- 事件: 当我们在图形化界面上执行一个操作的时候，我们很显然的就会引发一个事件。绑定在这个事件上的方法称为事件驱动程序。
- 函数成员: 单独拿出函数成员在这里进行重点的剖析。

1. 方法：就是我们常见的代码片段。
2. 构造函数
3. 析构函数：用于回收对象时被运行调用。
4. 属性：支持封装原理。
5. 索引器：用来在类当中表示一个数组。
## static veriable and instance variable
1. instance variable
在对象的生存期和对象保持一致。
2. static variable
被这个类所有，也就是不一定和每个对象的实例保持一致。
使用static variable的好处有下面的几点:
3. 数据复制
4. 减少数据的更改而导致的效率低下。
5. constant member
很显然，在缺省的情况下，常数变量是一个静态变量。

## 函数成员
### 实例方法

类的所有对象共享每个实例方法的一个 拷贝.
编译器将此方法所调用对象的引用作为一个参数暗中传递给实例方法。

静态方法
我们在使用静态方法的时候，可能会存在下面的几种情况：

1. 不能明确指定属于某一特定对象的方法应该是静态的
一个特定的实例就是Math类当中的多个方法
2. 使用静态方法是为了访问静态成员变量
一般来说，我们为了防止篡改，将静态的成员变量声明成为私有的，使用静态的函数可以来访问这些成员变量。

### 引用参数
前面我们看到了,C#当中存在两种类型，值类型和引用类型。
如果我们传递一个引用类型给了一个方法，那么我们实际上是传了这个类型的引用给了这个方法，所以我们对数据的修改会对原来的数据进行修改。
但是，当我们传递的是一个值类型的时候，我们只是传给了方法相应的变量的值而不是引用，所以在方法里对数据的修改不会影响到原来的数据。如果我们要传的是值类型的方法，我们可以使用ref关键字。比如:

`public static void(ref int a,ref int b)`

### 输出参数
每一个变量在调用之前都必须要初始化。

### 方法重载
在C#当中，允许进行方法的重载, 编译器将会根据下面的要求选择最好的函数来进行调用。

- 所提供的参数的数量和函数要求的数量一致。
- 每个参数必须含有和要求的参数相容的类型。
在一个类当中，可以出现多个具有相同的名称的类，只需要其对应的方法信号不同。
但是，当一个调用当中所提供的参数列表和所有的重载方法都不完全相同的时候，在参数的个数存在匹配的情况下，编译器会主动的寻找最合适的方法进行匹配。
当出现歧义的时候，编辑器会报出错误。
如果出现两个可以重载的方法，编辑器会优先选择参数是有符号数的那一个。

### this关键字自引用
对象的每个方法包含了指向该方法当前调用的引用 this .

### 对象的创建和垃圾回收
实例构造函数
自动初始化
c#会自动初始化变量，这取决于我们的基本类型的具体。

### 构造函数初始化
由于相同的类的构造函数可能也会重载，所以在执行的同时可能会有很多相同的核心代码，为了提高代码的利用率，我们可以在执行的时候先调用其他的初始化函数。比如下面的例子:

```
public class Location
{
	private int x;
	private int y;
	public Location():this(10,10){
	}
	public Location(int xx,int yy){
		this.x = xx;
		this.y = yy;
	}
 }
  ```

### 垃圾回收
将null值赋给所有关于这个对象的引用，当没有引用指向这个对象的时候，这个对象就会被自动的放弃。
包含某个对象的引用的本地变量越过了作用域。

### 析构函数
在一个对象的生命周期结束的时候，系统会自动执行析构函数。
但是，析构函数不会在对象没有用的时候立刻被回收。如果想要提高垃圾回收的速率，我们可是自定义一些函数, 比如 dispose 函数来进行垃圾的回收。

### 索引器
我们可以定义这样一个类，其本质上是数组，但是可以提供很多普通的数组所无法提供的内容。比如下面的代码:  

```
using System;
class BirthsList
{
	private uint[] births;
	public BirthsList(int numofobj){
		this.births = new uint[numofobj];
	}
	public uint this [uint index]
	{
		get
		{
			return births[index];
		}
		set{
			births[index] = value;
		}
	}
}
class BirthsListTest
{
	public static void Main()
	{
		BirthsList bir = new BirthsList(4);
		uint sum;
		bir[1] = 10;
		bir[2] = 50;
		bir[0] = 100;
		bir[3] = 120;
		sum = bir[0] + bir[1] + bir[2] + bir[3];
		Console.WriteLine("Sum of these values: {0}.",sum);
	}
}
```

重载索引器：在一个类当中，可能会存在多个索引器，使用不同的索引器信号可以构造出不同的索引器。

- 索引器信号当中不包含元素类型
- 索引器信号当中不包含参数的名字。