---
layout: post
title: 插头DP
tags: [algorithm, ACM/ICPC]
---

## 问题的引入
在文章的开头，首先膜拜CDQ女神，写的实在是太棒了。
我们先来看一个十分简单的问题：

`给定一个n*m的方格块，有一些是不可通过的障碍方格，我们要求其中的哈密顿回路的个数。`

## 分析
首先我们发现，对于每一个格子而言，在一条哈密顿回路当中，回路都是从一个方向进入，从一个方向出去的。(度数一定为2), 所以我们就引入了`插头`的概念。

对于一个四联通的图来说，每个格子存在4个插头，一共会有两个有效，所以一共就会存在6种情况。我们可以依据这些来进行求解。

而后，对于每个插头，我们需要记录其连通性，因为是一条哈密顿回路，所以最后所有的插头都必须是联通的。我们来看看下面的几种情况:

如果没有上插头和左插头，那么说明存在右插头和下插头，就是要加入新的联通分量。
如果上插头和左插头两个存在其中一个，那么我们可以显而易见的得到就是它们会转化成右插头或者下插头中的一个，不会产生新的联通分量。
如果均存在的话，即合并联通分量。

## 实现
我们使用二进制位，最小表示法来存储格子联通的情况。
为了防止不必要的状态的出现，我们可以使用BFS扩展的方式来进行迭代，得到结果。
几个题目：
[ural1519](https://github.com/Aaron19960821/icpcarchive/blob/master/dp/ural1519.cpp)
[hdu1964](https://github.com/Aaron19960821/icpcarchive/blob/master/dp/hdu1964.cpp)